<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Midterm Challenge: Philadelphia Housing Price Prediction – Luciano Lu - MUSA 5080 Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Luciano Lu - MUSA 5080 Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-public-policy-analytics" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Public Policy Analytics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-public-policy-analytics">    
        <li>
    <a class="dropdown-item" href="../../assignments/assignment_1/assignment1_template.html">
 <span class="dropdown-text">Census Data Quality for Policy Decisions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../assignments/assignment_2/Luciano_Lu_assignment2.html">
 <span class="dropdown-text">Spatial Analysis and Visualization - Healthcare Access and Equity in Pennsylvania</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../assignments/midterm/appendix_nolog.html">
 <span class="dropdown-text">Philadelphia Housing Price Prediction Model</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../assignments/assignment_4/Luciano_Lu_assignment4.html">
 <span class="dropdown-text">Spatial Predictive Modeling – Sanitation 311 Requests</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../assignments/assignment_5/hw_5.html">
 <span class="dropdown-text">Space-Time Prediction of Bike Share Demand: Philadelphia Indego</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../assignments/Final/FINAL_1.html">
 <span class="dropdown-text">Fire Alarms Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ppt" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">PPT</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ppt">    
        <li>
    <a class="dropdown-item" href="../../assignments/midterm/Presentation_slides.html">
 <span class="dropdown-text">Midterm PPT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../assignments/Final/presentation/Final_Presentation.html">
 <span class="dropdown-text">Final PPT</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#the-challenge" id="toc-the-challenge" class="nav-link" data-scroll-target="#the-challenge">The Challenge</a></li>
  <li><a href="#two-part-submission" id="toc-two-part-submission" class="nav-link" data-scroll-target="#two-part-submission">Two-Part Submission</a>
  <ul class="collapse">
  <li><a href="#part-a-presentation-slides-primary-deliverable" id="toc-part-a-presentation-slides-primary-deliverable" class="nav-link" data-scroll-target="#part-a-presentation-slides-primary-deliverable">Part A: Presentation Slides (Primary Deliverable)</a></li>
  <li><a href="#part-b-technical-appendix-supporting-documentation" id="toc-part-b-technical-appendix-supporting-documentation" class="nav-link" data-scroll-target="#part-b-technical-appendix-supporting-documentation">Part B: Technical Appendix (Supporting Documentation)</a></li>
  </ul></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data Sources</a>
  <ul class="collapse">
  <li><a href="#primary-dataset-philadelphia-property-sales" id="toc-primary-dataset-philadelphia-property-sales" class="nav-link" data-scroll-target="#primary-dataset-philadelphia-property-sales">Primary Dataset: Philadelphia Property Sales</a></li>
  <li><a href="#secondary-datasets-you-choose" id="toc-secondary-datasets-you-choose" class="nav-link" data-scroll-target="#secondary-datasets-you-choose">Secondary Datasets (You Choose!)</a></li>
  </ul></li>
  <li><a href="#assignment-structure" id="toc-assignment-structure" class="nav-link" data-scroll-target="#assignment-structure">Assignment Structure</a>
  <ul class="collapse">
  <li><a href="#phase-1-data-preparation-technical-appendix" id="toc-phase-1-data-preparation-technical-appendix" class="nav-link" data-scroll-target="#phase-1-data-preparation-technical-appendix">Phase 1: Data Preparation (Technical Appendix)</a></li>
  <li><a href="#phase-2-exploratory-data-analysis" id="toc-phase-2-exploratory-data-analysis" class="nav-link" data-scroll-target="#phase-2-exploratory-data-analysis">Phase 2: Exploratory Data Analysis</a></li>
  <li><a href="#phase-3-feature-engineering-technical-appendix" id="toc-phase-3-feature-engineering-technical-appendix" class="nav-link" data-scroll-target="#phase-3-feature-engineering-technical-appendix">Phase 3: Feature Engineering (Technical Appendix)</a></li>
  <li><a href="#phase-4-model-building" id="toc-phase-4-model-building" class="nav-link" data-scroll-target="#phase-4-model-building">Phase 4: Model Building</a></li>
  <li><a href="#phase-5-model-validation" id="toc-phase-5-model-validation" class="nav-link" data-scroll-target="#phase-5-model-validation">Phase 5: Model Validation</a></li>
  <li><a href="#phase-6-model-diagnostics-technical-appendix-only" id="toc-phase-6-model-diagnostics-technical-appendix-only" class="nav-link" data-scroll-target="#phase-6-model-diagnostics-technical-appendix-only">Phase 6: Model Diagnostics (Technical Appendix Only)</a></li>
  <li><a href="#phase-7-conclusions-recommendations" id="toc-phase-7-conclusions-recommendations" class="nav-link" data-scroll-target="#phase-7-conclusions-recommendations">Phase 7: Conclusions &amp; Recommendations</a></li>
  </ul></li>
  <li><a href="#submission-requirements" id="toc-submission-requirements" class="nav-link" data-scroll-target="#submission-requirements">Submission Requirements</a>
  <ul class="collapse">
  <li><a href="#what-to-submit-by-959-am-october-27-2025" id="toc-what-to-submit-by-959-am-october-27-2025" class="nav-link" data-scroll-target="#what-to-submit-by-959-am-october-27-2025">What to Submit (by 9:59 AM, October 27, 2025)</a></li>
  <li><a href="#in-class-presentation-october-27-2025" id="toc-in-class-presentation-october-27-2025" class="nav-link" data-scroll-target="#in-class-presentation-october-27-2025">In-Class Presentation (October 27, 2025)</a></li>
  </ul></li>
  <li><a href="#grading-rubric-scaled-to-15-of-course-grade" id="toc-grading-rubric-scaled-to-15-of-course-grade" class="nav-link" data-scroll-target="#grading-rubric-scaled-to-15-of-course-grade">Grading Rubric (Scaled to 15% of course grade)</a>
  <ul class="collapse">
  <li><a href="#presentation-slides" id="toc-presentation-slides" class="nav-link" data-scroll-target="#presentation-slides">Presentation Slides</a></li>
  <li><a href="#in-class-presentation" id="toc-in-class-presentation" class="nav-link" data-scroll-target="#in-class-presentation">In-Class Presentation</a></li>
  <li><a href="#technical-appendix" id="toc-technical-appendix" class="nav-link" data-scroll-target="#technical-appendix">Technical Appendix</a></li>
  </ul></li>
  <li><a href="#example-presentation-structure" id="toc-example-presentation-structure" class="nav-link" data-scroll-target="#example-presentation-structure">Example Presentation Structure</a></li>
  <li><a href="#tips-for-success" id="toc-tips-for-success" class="nav-link" data-scroll-target="#tips-for-success">Tips for Success</a>
  <ul class="collapse">
  <li><a href="#start-early" id="toc-start-early" class="nav-link" data-scroll-target="#start-early">Start Early</a></li>
  <li><a href="#check-your-work" id="toc-check-your-work" class="nav-link" data-scroll-target="#check-your-work">Check Your Work</a></li>
  </ul></li>
  <li><a href="#frequently-asked-questions" id="toc-frequently-asked-questions" class="nav-link" data-scroll-target="#frequently-asked-questions">Frequently Asked Questions</a></li>
  <li><a href="#example-workflow" id="toc-example-workflow" class="nav-link" data-scroll-target="#example-workflow">Example Workflow</a></li>
  <li><a href="#academic-integrity" id="toc-academic-integrity" class="nav-link" data-scroll-target="#academic-integrity">Academic Integrity</a></li>
  <li><a href="#final-checklist-before-submitting" id="toc-final-checklist-before-submitting" class="nav-link" data-scroll-target="#final-checklist-before-submitting">Final Checklist Before Submitting</a>
  <ul class="collapse">
  <li><a href="#presentation-slides-1" id="toc-presentation-slides-1" class="nav-link" data-scroll-target="#presentation-slides-1">Presentation Slides</a></li>
  <li><a href="#technical-appendix-1" id="toc-technical-appendix-1" class="nav-link" data-scroll-target="#technical-appendix-1">Technical Appendix</a></li>
  <li><a href="#both-files" id="toc-both-files" class="nav-link" data-scroll-target="#both-files">Both Files</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Midterm Challenge: Philadelphia Housing Price Prediction</h1>
<p class="subtitle lead">MUSA 5080 - Public Policy Analytics</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p><strong>Due Date:</strong> October 27, 2025</p>
<p><strong>In-Class Presentations:</strong> October 27, 2025 (5 minutes per team)</p>
<p><strong>Weight:</strong> 15% of final grade</p>
<p><strong>Team:</strong> You’ll work with your table-mates as a team. Feel free to delegate. Everyone should upload their final products onto their own portfolio websites. Be sure to acknowledge your team-mates.</p>
<p><strong>Submission Format:</strong></p>
<ol type="1">
<li><strong>Presentation Slides</strong> (.qmd → revealjs, ~10-15 slides) - Main deliverable (see my weekly lecture notes for inspiration!)</li>
<li><strong>Technical Appendix</strong> (.qmd → HTML document) - Supporting details</li>
</ol>
<hr>
</section>
<section id="the-challenge" class="level2">
<h2 class="anchored" data-anchor-id="the-challenge">The Challenge</h2>
<p>You are consultancy (please name your consultancy) competing to win the bid to work for a project for the <strong>Philadelphia Office of Property Assessment</strong>. The city wants to improve its Automated Valuation Model (AVM) for property tax assessments. Your task is to build a predictive model for residential sale prices and <strong>present your findings</strong> to city officials in a 5-minute briefing.</p>
<p><strong>Deliverables:</strong></p>
<ol type="1">
<li><strong>Presentation slides</strong> (10-15 slides MAX) - Your main findings for stakeholders</li>
<li><strong>Technical appendix</strong> (HTML document) - All code, diagnostics, and detailed analysis</li>
<li><strong>5-minute in-class presentation</strong> - Deliver your slides on October 27th</li>
</ol>
<p><strong>Your goal:</strong> Predict 2023-2024 home sale prices accurately while communicating findings clearly to a policy audience.</p>
<hr>
</section>
<section id="two-part-submission" class="level2">
<h2 class="anchored" data-anchor-id="two-part-submission">Two-Part Submission</h2>
<section id="part-a-presentation-slides-primary-deliverable" class="level3">
<h3 class="anchored" data-anchor-id="part-a-presentation-slides-primary-deliverable">Part A: Presentation Slides (Primary Deliverable)</h3>
<p><strong>Format:</strong> Quarto revealjs presentation</p>
<p><strong>Example YAML:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Philadelphia Housing Price Prediction"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">subtitle</span><span class="kw">:</span><span class="at"> </span><span class="st">"Improving Property Tax Assessments"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Your Name"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">revealjs</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> simple</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">slide-number</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">smaller</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Content:</strong> ~10-15 (could be less!!) slides covering: 1. Research question &amp; motivation (1-2 slides) 2. Data overview (1 slide) 3. Key visualizations (2-3 slides) 4. Model comparison results (1-2 slides) 5. Main findings (2-3 slides) 6. Policy recommendations (1-2 slides)</p>
<p><strong>Audience:</strong> City officials who don’t know R or care about the nitty gritty of stats. They just want the best estimates possible.</p>
<p><strong>No code</strong> in these slides - just polished visualizations and key takeaways</p>
<hr>
</section>
<section id="part-b-technical-appendix-supporting-documentation" class="level3">
<h3 class="anchored" data-anchor-id="part-b-technical-appendix-supporting-documentation">Part B: Technical Appendix (Supporting Documentation)</h3>
<p><strong>Format:</strong> Quarto HTML document</p>
<p><strong>Example YAML:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Philadelphia Housing Model - Technical Appendix"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Your Name"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">code-fold</span><span class="kw">:</span><span class="at"> show</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc-location</span><span class="kw">:</span><span class="at"> left</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> cosmo</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Content:</strong> All the technical details: - Complete data cleaning code - All EDA visualizations - Feature engineering code - Full model outputs - Diagnostic plots - Detailed interpretations</p>
<p><strong>Audience:</strong> Data scientists and technical reviewers</p>
<p><strong>All code visible</strong> - this is where you show your work</p>
<hr>
</section>
</section>
<section id="data-sources" class="level2">
<h2 class="anchored" data-anchor-id="data-sources">Data Sources</h2>
<section id="primary-dataset-philadelphia-property-sales" class="level3">
<h3 class="anchored" data-anchor-id="primary-dataset-philadelphia-property-sales">Primary Dataset: Philadelphia Property Sales</h3>
<p><strong>Source:</strong> <a href="https://metadata.phila.gov/#home/datasetdetails/5543865f20583086178c4ee5/representationdetails/55d624fdad35c7e854cb21a4/">Philadelphia Property Sales</a></p>
<p>This dataset contains actual property sales with:</p>
<ul>
<li>Sale price</li>
<li>Sale date</li>
<li>Property characteristics (bedrooms, bathrooms, sq ft, etc.)</li>
<li>Property location (address, coordinates)</li>
</ul>
<p><strong>You will need to:</strong></p>
<ul>
<li>Download the data</li>
<li>Clean it (missing values, outliers, data errors)</li>
<li>Filter to 2023-2024 residential sales only</li>
</ul>
</section>
<section id="secondary-datasets-you-choose" class="level3">
<h3 class="anchored" data-anchor-id="secondary-datasets-you-choose">Secondary Datasets (You Choose!)</h3>
<p><strong>Required:</strong> Browse the OpenPhily Data portal and use Census Data to incorporate spatial features into your model.</p>
<p><strong>Your task:</strong> Think like an urban planner. What location factors matter for housing prices in Philadelphia?</p>
<hr>
</section>
</section>
<section id="assignment-structure" class="level2">
<h2 class="anchored" data-anchor-id="assignment-structure">Assignment Structure</h2>
<p>Your work should follow this workflow, with results split between presentation and appendix:</p>
<section id="phase-1-data-preparation-technical-appendix" class="level3">
<h3 class="anchored" data-anchor-id="phase-1-data-preparation-technical-appendix">Phase 1: Data Preparation (Technical Appendix)</h3>
<p><strong>Load and clean Philadelphia sales data:</strong></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.4.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   4.0.0     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'sf' was built under R version 4.4.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.13.0, GDAL 3.10.1, PROJ 9.5.1; sf_use_s2() is TRUE</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidycensus' was built under R version 4.4.3</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tigris' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>To enable caching of data, set `options(tigris_use_cache = TRUE)`
in your R script or .Rprofile.</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tigris_use_cache =</span> <span class="cn">TRUE</span>, <span class="at">tigris_class =</span> <span class="st">"sf"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'MASS' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'MASS'

The following object is masked from 'package:dplyr':

    select</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'scales' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'

The following object is masked from 'package:purrr':

    discard

The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'caret' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice

Attaching package: 'caret'

The following object is masked from 'package:purrr':

    lift</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load primary sales data</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>opa <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/opa_properties_public.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 583776 Columns: 79
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (38): basements, beginning_point, book_and_page, building_code, buildin...
dbl  (31): objectid, category_code, census_tract, depth, exempt_building, ex...
lgl   (7): cross_reference, date_exterior_condition, mailing_address_2, mark...
dttm  (3): assessment_date, recording_date, sale_date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>opa_clean <span class="ot">&lt;-</span> opa <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_date =</span> <span class="fu">as.Date</span>(sale_date)) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(sale_date, <span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>), <span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>)))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/opa_properties_public.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 583,776 × 79
    objectid assessment_date     basements beginning_point         book_and_page
       &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;     &lt;chr&gt;                   &lt;chr&gt;        
 1 695547670 2024-05-31 01:05:37 D         "90' W 21 ST"           54472500     
 2 695547671 2024-05-31 01:05:37 &lt;NA&gt;      "360'7 1/2\" W OF 20TH" 54472278     
 3 695547672 2024-05-31 01:05:37 &lt;NA&gt;      "313'6\" N OF MORSE ST" 54472444     
 4 695547673 2024-05-31 01:05:37 0         "SEC BIRWOOD ST"        54472241     
 5 695547674 2024-05-31 01:05:37 D         "61'8\" W OF 19TH ST"   54472329     
 6 695547675 2024-05-31 01:05:37 &lt;NA&gt;      "SEC BOUIER ST"         54472270     
 7 695547676 2024-05-31 01:05:37 &lt;NA&gt;      "51'6\"N JEFFERSON ST"  54472399     
 8 695547677 2024-05-31 01:05:37 J         "144' S TASKER ST"      54472391     
 9 695547678 2024-05-31 01:05:37 &lt;NA&gt;      "SWC OXFORD ST"         54472437     
10 695547679 2024-05-31 01:05:37 &lt;NA&gt;      "238' W BROAD ST"       54472359     
# ℹ 583,766 more rows
# ℹ 74 more variables: building_code &lt;chr&gt;, building_code_description &lt;chr&gt;,
#   category_code &lt;dbl&gt;, category_code_description &lt;chr&gt;, census_tract &lt;dbl&gt;,
#   central_air &lt;chr&gt;, cross_reference &lt;lgl&gt;, date_exterior_condition &lt;lgl&gt;,
#   depth &lt;dbl&gt;, exempt_building &lt;dbl&gt;, exempt_land &lt;dbl&gt;,
#   exterior_condition &lt;dbl&gt;, fireplaces &lt;dbl&gt;, frontage &lt;dbl&gt;, fuel &lt;chr&gt;,
#   garage_spaces &lt;dbl&gt;, garage_type &lt;dbl&gt;, general_construction &lt;chr&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select relevant variables</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>opa_selected <span class="ot">&lt;-</span> opa_clean <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    sale_date, sale_price, market_value, building_code_description,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    total_livable_area, number_of_bedrooms, number_of_bathrooms,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    number_stories, garage_spaces, central_air, quality_grade,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    interior_condition, exterior_condition, year_built,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    zip_code, geographic_ward, census_tract, zoning, owner_1,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    category_code_description, shape</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(category_code_description <span class="sc">==</span> <span class="st">"SINGLE FAMILY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(sale_price) <span class="sc">&amp;</span> sale_price <span class="sc">&gt;</span> <span class="dv">1000</span> <span class="sc">&amp;</span> sale_price <span class="sc">&lt;</span> <span class="fl">1e8</span>,</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(total_livable_area) <span class="sc">&amp;</span> total_livable_area <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(year_built) <span class="sc">&amp;</span> year_built <span class="sc">&gt;</span> <span class="dv">1800</span> <span class="sc">&amp;</span> year_built <span class="sc">&lt;=</span> <span class="dv">2025</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform to sf object</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>opa_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(opa_selected, <span class="at">wkt =</span> <span class="st">"shape"</span>, <span class="at">crs =</span> <span class="dv">2272</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">4326</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new variable: house age</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>opa_sf <span class="ot">&lt;-</span> opa_sf <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">house_age =</span> <span class="dv">2025</span> <span class="sc">-</span> year_built</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(house_age <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> house_age <span class="sc">&lt;=</span> <span class="dv">200</span>)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>opa_sf<span class="sc">$</span>central_air <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(opa_sf<span class="sc">$</span>central_air <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Y"</span>, <span class="st">"1"</span>), <span class="dv">1</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">ifelse</span>(opa_sf<span class="sc">$</span>central_air <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"N"</span>, <span class="st">"0"</span>), <span class="dv">0</span>, <span class="cn">NA</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Load secondary data:</strong></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Census data for Philadelphia tracts</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>philly_census <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"tract"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_pop =</span> <span class="st">"B01003_001"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">white_pop =</span> <span class="st">"B02001_002"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">asian_pop =</span> <span class="st">"B02001_005"</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ba_degree =</span> <span class="st">"B15003_022"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_edu =</span> <span class="st">"B15003_001"</span>,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_income =</span> <span class="st">"B19013_001"</span>,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">poverty_pop =</span> <span class="st">"B17001_002"</span>,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">labor_force =</span> <span class="st">"B23025_003"</span>,</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">unemployed =</span> <span class="st">"B23025_005"</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2023</span>,</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"PA"</span>,</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="st">"Philadelphia"</span>,</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">geometry =</span> <span class="cn">TRUE</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(GEOID, variable, estimate, geometry) <span class="sc">%&gt;%</span>   <span class="co"># ← 用 dplyr::</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> estimate) <span class="sc">%&gt;%</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">white_share =</span> <span class="dv">100</span> <span class="sc">*</span> white_pop <span class="sc">/</span> total_pop,</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">asian_share =</span> <span class="dv">100</span> <span class="sc">*</span> asian_pop <span class="sc">/</span> total_pop,</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">ba_rate =</span> <span class="dv">100</span> <span class="sc">*</span> ba_degree <span class="sc">/</span> total_edu,</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">unemployment_rate =</span> <span class="dv">100</span> <span class="sc">*</span> unemployed <span class="sc">/</span> labor_force,</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">poverty_rate =</span> <span class="dv">100</span> <span class="sc">*</span> poverty_pop <span class="sc">/</span> total_pop</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(opa_sf))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2019-2023 5-year ACS</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatial join of OPA data with Census data</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>opa_census <span class="ot">&lt;-</span> <span class="fu">st_join</span>(opa_sf, philly_census, <span class="at">join =</span> st_within) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(median_income))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Deliverable (Appendix only):</strong></p>
<p>This section documents the data cleaning and preparation process for the Philadelphia housing dataset used in our modeling analysis.</p>
<p>Deliverables include:</p>
<p>✅ Complete data cleaning code: full R pipeline from raw OPA property sales to a cleaned, spatially joined dataset ready for modeling.</p>
<p>✅ Summary tables showing before/after dimensions: record counts before and after filtering, demonstrating how outliers, missing values, and non-residential properties were removed.</p>
<p>✅ Narrative explaining decisions: rationale for each filtering and transformation step, including choices about time range (2023–2024), residential property type selection, treatment of missing or implausible values, and creation of derived variables such as house_age.</p>
<p>Together, these components ensure transparency and reproducibility of the data preprocessing workflow prior to modeling.</p>
<hr>
</section>
<section id="phase-2-exploratory-data-analysis" class="level3">
<h3 class="anchored" data-anchor-id="phase-2-exploratory-data-analysis">Phase 2: Exploratory Data Analysis</h3>
<p><strong>Create at least 5 professional visualizations:</strong></p>
<ol type="1">
<li>Distribution of sale prices (histogram)</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(opa_census, <span class="fu">aes</span>(<span class="at">x =</span> sale_price)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">40</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">median</span>(<span class="fu">log</span>(sale_price))), <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of Log Sale Prices (2023–2024)"</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Sale Price"</span>, <span class="at">y =</span> <span class="st">"Count"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Geographic distribution (map)</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> philly_census, <span class="at">fill =</span> <span class="st">"lightgrey"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> opa_census, <span class="fu">aes</span>(<span class="at">color =</span> sale_price), <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Housing Sales in Philadelphia (2023-2024)"</span>, <span class="at">color =</span> <span class="st">"Sale Price"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Price vs.&nbsp;structural features (scatter plots)</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(opa_census, <span class="fu">aes</span>(<span class="at">x =</span> total_livable_area, <span class="at">y =</span> sale_price)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sale Price vs. Livable Area"</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Total Livable Area "</span>, <span class="at">y =</span> <span class="st">"Sale Price"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Price vs.&nbsp;spatial features (scatter plots)</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(opa_census, <span class="fu">aes</span>(<span class="at">x =</span> unemployment_rate, <span class="at">y =</span> sale_price)) <span class="sc">+</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"#4682B4"</span>) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Sale Price vs unemployment rate"</span>,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"unemployment rate (%)"</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Sale Price"</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>One creative visualization</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>ward_boundaries <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"~/Datasets for r Trainning/Political_Wards.geojson"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">2272</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">geographic_ward =</span> <span class="fu">as.character</span>(ward_num)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `Political_Wards' from data source 
  `C:\Users\Jingqi\Documents\Datasets for r Trainning\Political_Wards.geojson' 
  using driver `GeoJSON'
Simple feature collection with 66 features and 4 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -75.28031 ymin: 39.86748 xmax: -74.95574 ymax: 40.13793
Geodetic CRS:  WGS 84</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>ward_price <span class="ot">&lt;-</span> opa_census <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">geographic_ward =</span> <span class="fu">as.character</span>(geographic_ward)) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(geographic_ward) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">median_price =</span> <span class="fu">median</span>(sale_price, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>ward_sf <span class="ot">&lt;-</span> ward_boundaries <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ward_price, <span class="at">by =</span> <span class="st">"geographic_ward"</span>)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ward_sf) <span class="sc">+</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> median_price), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Median Residential Sale Price by Ward (2023–2024)"</span>,</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Philadelphia, PA"</span>,</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data: OPA Property Sales 2023–2024"</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>For presentation slides:</strong> Select your <strong>best 2-3 visualizations</strong> that tell a compelling story</p>
<p><strong>For appendix:</strong> Include all visualizations with detailed interpretations</p>
<p><strong>Example presentation slide:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Where Are Expensive Homes in Philadelphia?</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Beautiful map showing price patterns</span><span class="co">]</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>**Key Findings:**</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Center City and University City command premium prices</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>River wards show emerging appreciation</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Northeast Philadelphia remains most affordable</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="phase-3-feature-engineering-technical-appendix" class="level3">
<h3 class="anchored" data-anchor-id="phase-3-feature-engineering-technical-appendix">Phase 3: Feature Engineering (Technical Appendix)</h3>
<p><strong>Create spatial features: (these are examples below, but how you construct your model is up to your team)</strong></p>
<ol type="1">
<li><strong>Buffer-based features</strong>:</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load transit stop data and create buffer-based feature</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>Transit <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/Transit.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 22478 Columns: 11
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): LineAbbr, Direction, StopAbbr, StopName
dbl (7): X, Y, FID, Sequence, StopId, Lon, Lat

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>transit_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(Transit, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"Lon"</span>, <span class="st">"Lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(opa_census))</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>radius <span class="ot">&lt;-</span> <span class="dv">400</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>opa_census<span class="sc">$</span>transit_count <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_is_within_distance</span>(opa_census, transit_sf, <span class="at">dist =</span> radius))</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/Transit.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22,478 × 11
           X        Y   FID LineAbbr Direction Sequence StopId StopAbbr StopName
       &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
 1 -8364470. 4869338.     1 4        Northbou…       84  17382 9THWYONO 9th St …
 2 -8364431. 4869570.     2 4        Northbou…       85  28692 9THLOUNO 9th St …
 3 -8364395. 4869787.     3 4        Northbou…       86  17384 9THROCNO 9th St …
 4 -8364358. 4870003.     4 4        Northbou…       87  17386 9THRUSNO 9th St …
 5 -8364321. 4870222.     5 4        Northbou…       88  17387 9THLINNO 9th St …
 6 -8364284. 4870445.     6 4        Northbou…       89  17389 9THDUNNO 9th St …
 7 -8364248. 4870671.     7 4        Northbou…       90  17390 FIS9THWE 9th St …
 8 -8364419. 4870722.     8 4        Northbou…       91  17393 FIS10TWE Fisher …
 9 -8364534. 4870916.     9 4        Northbou…       92  28693 WAG10TNW 10th St…
10 -8364559. 4870989.    10 4        Northbou…       93  17394 11TSOMNO 11th St…
# ℹ 22,468 more rows
# ℹ 2 more variables: Lon &lt;dbl&gt;, Lat &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>recreation <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/recreation.csv"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 171 Columns: 12
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): PARK_NAME, PROGRAM_TYPE, SITE_CLASS, BUILDING, GYM, COMMENTS, DATA_...
dbl (4): X, Y, OBJECTID, DPP_ASSET_ID
lgl (1): LABEL_NUMBER

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>recreation_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(recreation, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span> <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(opa_census)) </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>radius_rec <span class="ot">&lt;-</span> <span class="dv">1200</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>opa_census<span class="sc">$</span>recreation_count <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_is_within_distance</span>(opa_census, recreation_sf, <span class="at">dist =</span> radius_rec)) </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/recreation.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 171 × 12
       X     Y OBJECTID PARK_NAME  DPP_ASSET_ID PROGRAM_TYPE SITE_CLASS BUILDING
   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;   
 1 -75.2  40.0      807 Tiffany F…         1911 PPR_REC      A          Y       
 2 -75.2  40.0      808 Roberto C…         1831 PPR_REC      B          Y       
 3 -75.2  40.0      809 Miles Mac…         1910 PPR_REC      A          Y       
 4 -75.3  40.0      810 William T…         1864 PPR_REC      B          Y       
 5 -75.2  40.0      811 Francisvi…         1859 PPR_REC      A          Y       
 6 -75.3  40.0      812 Charles A…         1929 PPR_REC      A          Y       
 7 -75.1  40.0      813 Fishtown …         1856 PPR_REC      A          Y       
 8 -75.1  40.0      814 Narcissa …          908 PPR_REC      A          Y       
 9 -75.2  40.0      815 Conestoga…         1982 PPR_REC      A          Y       
10 -75.1  40.0      816 Dan Shiss…         1844 PPR_REC      A          Y       
# ℹ 161 more rows
# ℹ 4 more variables: GYM &lt;chr&gt;, LABEL_NUMBER &lt;lgl&gt;, COMMENTS &lt;chr&gt;,
#   DATA_SOURCE &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load crime data and create buffer-based feature </span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>crime <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/crime.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(lat) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(lng)) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 169017 Columns: 18
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (6): the_geom, the_geom_webmercator, dc_dist, psa, location_block, text...
dbl  (9): cartodb_id, objectid, hour, dc_key, ucr_general, point_x, point_y,...
dttm (1): dispatch_date_time
date (1): dispatch_date
time (1): dispatch_time

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>crime_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(crime, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lng"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(opa_census)) </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>radius_cri <span class="ot">&lt;-</span> <span class="dv">400</span> </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>opa_census<span class="sc">$</span>crime_count <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_is_within_distance</span>(opa_census, crime_sf, <span class="at">dist =</span> radius_cri)) </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"~/Datasets for r Trainning/crime.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 169,017 × 18
   the_geom               cartodb_id the_geom_webmercator objectid dc_dist psa  
   &lt;chr&gt;                       &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;
 1 0101000020E61000002C3…      43806 0101000020110F0000F… 32951062 02      1    
 2 0101000020E6100000905…      43828 0101000020110F00008… 32951072 17      1    
 3 0101000020E6100000A4F…      43847 0101000020110F00002… 32951081 14      2    
 4 0101000020E6100000A4F…      43848 0101000020110F00002… 32951082 14      2    
 5 0101000020E6100000A4F…      43849 0101000020110F00002… 32951083 14      2    
 6 0101000020E6100000241…      43850 0101000020110F0000B… 32951108 03      3    
 7 0101000020E6100000580…      43905 0101000020110F00002… 32951093 12      4    
 8 0101000020E6100000580…      43906 0101000020110F00002… 32951094 12      4    
 9 0101000020E6100000580…      43908 0101000020110F00002… 32951095 12      4    
10 0101000020E6100000580…      43911 0101000020110F00002… 32951096 12      4    
# ℹ 169,007 more rows
# ℹ 12 more variables: dispatch_date_time &lt;dttm&gt;, dispatch_date &lt;date&gt;,
#   dispatch_time &lt;time&gt;, hour &lt;dbl&gt;, dc_key &lt;dbl&gt;, location_block &lt;chr&gt;,
#   ucr_general &lt;dbl&gt;, text_general_code &lt;chr&gt;, point_x &lt;dbl&gt;, point_y &lt;dbl&gt;,
#   lat &lt;dbl&gt;, lng &lt;dbl&gt;</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><strong>k-Nearest Neighbor features</strong>:</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>hospital_sf <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"~/Datasets for r Trainning/hospitals.geojson"</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(opa_census))</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>opa_census <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(opa_census, <span class="fu">st_crs</span>(hospital_sf))</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>nearest_hospital_index <span class="ot">&lt;-</span> <span class="fu">st_nearest_feature</span>(opa_census, hospital_sf)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>opa_census<span class="sc">$</span>nearest_hospital_m <span class="ot">&lt;-</span> <span class="fu">st_distance</span>(</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  opa_census,</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  hospital_sf[nearest_hospital_index, ],</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">by_element =</span> <span class="cn">TRUE</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>opa_census<span class="sc">$</span>nearest_hospital_m <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(opa_census<span class="sc">$</span>nearest_hospital_m)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<ol start="3" type="1">
<li><p><strong>Census variables</strong>:</p>
<p>See secondary data above for examples (median income, education rate, unemployment rate, etc.)</p></li>
<li><p><strong>Interaction terms</strong>:</p>
<ul>
<li>Theoretically motivated combinations</li>
<li>Example: <code>total_livable_area * house_age</code></li>
</ul></li>
</ol>
<p><strong>Deliverable (Appendix only):</strong></p>
<ul>
<li>All feature engineering code</li>
<li>Summary table of features created</li>
<li>Brief justification for each feature</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>summary_table <span class="ot">&lt;-</span> opa_census <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">where</span>(is.numeric),</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">mean =</span> <span class="sc">~</span><span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">sd   =</span> <span class="sc">~</span><span class="fu">sd</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">min  =</span> <span class="sc">~</span><span class="fu">min</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">max  =</span> <span class="sc">~</span><span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"variable"</span>, <span class="st">"stat"</span>),</span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"^(.*)_(mean|sd|min|max)$"</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> stat,</span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(summary_table)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 33 × 5
   variable                  mean         sd   min      max
   &lt;chr&gt;                    &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
 1 sale_price          339609.    458326.     1500 15428633
 2 market_value        299951.    308680.     5000 14660000
 3 total_livable_area    1368.       602.      120    14150
 4 number_of_bedrooms       2.83       0.998     0       12
 5 number_of_bathrooms      1.38       0.723     0       12
 6 number_stories           1.96       0.585     1        5
 7 garage_spaces            0.343      0.585     0       37
 8 central_air              0.600      0.490     0        1
 9 interior_condition       3.37       0.981     0        7
10 exterior_condition       3.68       0.884     0        7
# ℹ 23 more rows</code></pre>
</div>
</div>
<hr>
</section>
<section id="phase-4-model-building" class="level3">
<h3 class="anchored" data-anchor-id="phase-4-model-building">Phase 4: Model Building</h3>
<p><strong>Build models progressively: (for example)</strong></p>
<ol type="1">
<li>Structural features only</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(sale_price <span class="sc">~</span> total_livable_area <span class="sc">+</span> number_of_bedrooms <span class="sc">+</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>               number_of_bathrooms <span class="sc">+</span> house_age,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> opa_census)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = sale_price ~ total_livable_area + number_of_bedrooms + 
    number_of_bathrooms + house_age, data = opa_census)

Residuals:
     Min       1Q   Median       3Q      Max 
-3106972  -129059   -51002    34078 12819341 

Coefficients:
                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)          39619.855  12037.673   3.291 0.000999 ***
total_livable_area     269.286      5.226  51.533  &lt; 2e-16 ***
number_of_bedrooms  -54370.943   3111.804 -17.472  &lt; 2e-16 ***
number_of_bathrooms 112256.591   4625.398  24.270  &lt; 2e-16 ***
house_age             -835.628     89.777  -9.308  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 416200 on 25187 degrees of freedom
  (918 observations deleted due to missingness)
Multiple R-squared:  0.1904,    Adjusted R-squared:  0.1903 
F-statistic:  1481 on 4 and 25187 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><ul>
<li>Census variables</li>
</ul></li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(sale_price <span class="sc">~</span> total_livable_area <span class="sc">+</span> number_of_bedrooms <span class="sc">+</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>               number_of_bathrooms <span class="sc">+</span> house_age <span class="sc">+</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>               median_income <span class="sc">+</span> ba_rate <span class="sc">+</span> unemployment_rate,</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> opa_census)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = sale_price ~ total_livable_area + number_of_bedrooms + 
    number_of_bathrooms + house_age + median_income + ba_rate + 
    unemployment_rate, data = opa_census)

Residuals:
     Min       1Q   Median       3Q      Max 
-2746189  -108765   -43321    19441 12907761 

Coefficients:
                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)         -6.634e+04  1.560e+04  -4.253 2.12e-05 ***
total_livable_area   2.480e+02  5.224e+00  47.473  &lt; 2e-16 ***
number_of_bedrooms  -2.708e+04  3.235e+03  -8.370  &lt; 2e-16 ***
number_of_bathrooms  7.618e+04  4.759e+03  16.009  &lt; 2e-16 ***
house_age           -7.569e+02  8.914e+01  -8.491  &lt; 2e-16 ***
median_income        2.517e-01  1.370e-01   1.837 0.066206 .  
ba_rate              5.027e+03  3.559e+02  14.126  &lt; 2e-16 ***
unemployment_rate   -2.033e+03  5.375e+02  -3.783 0.000156 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 410500 on 25184 degrees of freedom
  (918 observations deleted due to missingness)
Multiple R-squared:  0.2127,    Adjusted R-squared:  0.2124 
F-statistic: 971.7 on 7 and 25184 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<ol start="3" type="1">
<li><ul>
<li>Spatial features</li>
</ul></li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(sale_price <span class="sc">~</span> total_livable_area <span class="sc">+</span> number_of_bedrooms <span class="sc">+</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>               number_of_bathrooms <span class="sc">+</span> house_age <span class="sc">+</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>               median_income <span class="sc">+</span> ba_rate <span class="sc">+</span> crime_count <span class="sc">+</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>               transit_count <span class="sc">+</span> recreation_count <span class="sc">+</span> nearest_hospital_m,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> opa_census)</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = sale_price ~ total_livable_area + number_of_bedrooms + 
    number_of_bathrooms + house_age + median_income + ba_rate + 
    crime_count + transit_count + recreation_count + nearest_hospital_m, 
    data = opa_census)

Residuals:
     Min       1Q   Median       3Q      Max 
-2759832  -115652   -37521    35962 12612068 

Coefficients:
                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)         -1.822e+05  1.665e+04 -10.945  &lt; 2e-16 ***
total_livable_area   2.556e+02  5.198e+00  49.179  &lt; 2e-16 ***
number_of_bedrooms  -1.680e+04  3.242e+03  -5.181 2.22e-07 ***
number_of_bathrooms  6.735e+04  4.738e+03  14.216  &lt; 2e-16 ***
house_age           -1.155e+03  9.096e+01 -12.700  &lt; 2e-16 ***
median_income        7.282e-01  1.343e-01   5.423 5.90e-08 ***
ba_rate              4.155e+03  3.636e+02  11.426  &lt; 2e-16 ***
crime_count          1.361e+02  1.106e+01  12.302  &lt; 2e-16 ***
transit_count        1.301e+03  1.382e+02   9.413  &lt; 2e-16 ***
recreation_count    -8.122e+02  1.274e+03  -0.637    0.524    
nearest_hospital_m  -2.059e+00  2.863e+00  -0.719    0.472    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 406700 on 25181 degrees of freedom
  (918 observations deleted due to missingness)
Multiple R-squared:  0.227, Adjusted R-squared:  0.2267 
F-statistic: 739.4 on 10 and 25181 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<ol start="4" type="1">
<li><ul>
<li>Interactions and fixed effects</li>
</ul></li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>ward_boundaries <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(ward_boundaries, <span class="fu">st_crs</span>(opa_census))</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>opa_census <span class="ot">&lt;-</span> <span class="fu">st_join</span>(opa_census, ward_boundaries <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(geographic_ward), <span class="at">left =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>model4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(sale_price <span class="sc">~</span> total_livable_area <span class="sc">*</span> house_age <span class="sc">+</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>               number_of_bathrooms <span class="sc">+</span> house_age <span class="sc">+</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>               median_income <span class="sc">+</span> ba_rate <span class="sc">+</span> crime_count <span class="sc">+</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>               transit_count <span class="sc">+</span> nearest_hospital_m <span class="sc">+</span> <span class="fu">factor</span>(geographic_ward.y),</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> opa_census)</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model4)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = sale_price ~ total_livable_area * house_age + number_of_bathrooms + 
    house_age + median_income + ba_rate + crime_count + transit_count + 
    nearest_hospital_m + factor(geographic_ward.y), data = opa_census)

Residuals:
     Min       1Q   Median       3Q      Max 
-1356133  -108763   -25575    45039 11347614 

Coefficients:
                               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                  -2.453e+05  3.450e+04  -7.109 1.20e-12 ***
total_livable_area            4.192e+02  9.866e+00  42.489  &lt; 2e-16 ***
house_age                     2.224e+03  1.931e+02  11.516  &lt; 2e-16 ***
number_of_bathrooms           4.054e+04  4.189e+03   9.677  &lt; 2e-16 ***
median_income                -3.155e-01  1.580e-01  -1.996 0.045900 *  
ba_rate                       2.104e+03  4.870e+02   4.320 1.56e-05 ***
crime_count                   3.260e+01  1.285e+01   2.537 0.011187 *  
transit_count                -2.174e+02  1.604e+02  -1.355 0.175303    
nearest_hospital_m           -1.277e+01  5.442e+00  -2.347 0.018947 *  
factor(geographic_ward.y)10  -8.399e+04  3.208e+04  -2.618 0.008854 ** 
factor(geographic_ward.y)11  -1.356e+05  3.755e+04  -3.610 0.000306 ***
factor(geographic_ward.y)12  -5.652e+04  3.262e+04  -1.733 0.083126 .  
factor(geographic_ward.y)13  -1.082e+05  3.337e+04  -3.243 0.001186 ** 
factor(geographic_ward.y)14  -4.444e+04  6.467e+04  -0.687 0.492037    
factor(geographic_ward.y)15   1.300e+05  2.721e+04   4.779 1.77e-06 ***
factor(geographic_ward.y)16  -5.721e+04  3.360e+04  -1.703 0.088612 .  
factor(geographic_ward.y)17  -1.187e+05  3.475e+04  -3.415 0.000639 ***
factor(geographic_ward.y)18  -2.734e+04  2.700e+04  -1.013 0.311227    
factor(geographic_ward.y)19  -1.466e+05  3.583e+04  -4.092 4.29e-05 ***
factor(geographic_ward.y)2    1.119e+05  2.619e+04   4.274 1.92e-05 ***
factor(geographic_ward.y)20  -1.466e+05  5.748e+04  -2.550 0.010772 *  
factor(geographic_ward.y)21  -4.677e+04  2.351e+04  -1.989 0.046660 *  
factor(geographic_ward.y)22  -6.415e+04  3.186e+04  -2.014 0.044054 *  
factor(geographic_ward.y)23  -9.051e+04  3.210e+04  -2.819 0.004816 ** 
factor(geographic_ward.y)24  -7.628e+04  4.171e+04  -1.829 0.067484 .  
factor(geographic_ward.y)25  -3.169e+04  2.815e+04  -1.126 0.260174    
factor(geographic_ward.y)26  -5.375e+04  3.038e+04  -1.770 0.076808 .  
factor(geographic_ward.y)27  -1.286e+04  4.740e+04  -0.271 0.786181    
factor(geographic_ward.y)28  -1.482e+05  3.507e+04  -4.226 2.39e-05 ***
factor(geographic_ward.y)29  -6.366e+04  3.200e+04  -1.989 0.046695 *  
factor(geographic_ward.y)3   -3.813e+04  3.370e+04  -1.131 0.257857    
factor(geographic_ward.y)30   2.050e+05  2.727e+04   7.519 5.72e-14 ***
factor(geographic_ward.y)31   4.883e+03  2.505e+04   0.195 0.845441    
factor(geographic_ward.y)32   1.317e+04  3.311e+04   0.398 0.690895    
factor(geographic_ward.y)33  -1.382e+05  3.004e+04  -4.600 4.24e-06 ***
factor(geographic_ward.y)34   5.623e+04  2.863e+04   1.964 0.049578 *  
factor(geographic_ward.y)35  -9.356e+04  2.919e+04  -3.206 0.001349 ** 
factor(geographic_ward.y)36  -5.053e+04  2.405e+04  -2.100 0.035695 *  
factor(geographic_ward.y)37  -2.155e+05  4.203e+04  -5.127 2.96e-07 ***
factor(geographic_ward.y)38  -1.808e+04  2.938e+04  -0.615 0.538305    
factor(geographic_ward.y)39  -1.733e+04  2.442e+04  -0.710 0.477864    
factor(geographic_ward.y)4    1.514e+05  3.225e+04   4.696 2.67e-06 ***
factor(geographic_ward.y)40  -5.833e+04  2.791e+04  -2.090 0.036624 *  
factor(geographic_ward.y)41  -7.278e+04  3.128e+04  -2.327 0.019982 *  
factor(geographic_ward.y)42  -7.694e+04  2.960e+04  -2.600 0.009334 ** 
factor(geographic_ward.y)43  -4.740e+03  3.118e+04  -0.152 0.879177    
factor(geographic_ward.y)44   3.362e+04  3.494e+04   0.962 0.335917    
factor(geographic_ward.y)45  -2.019e+04  2.848e+04  -0.709 0.478421    
factor(geographic_ward.y)46  -2.948e+04  3.371e+04  -0.874 0.381869    
factor(geographic_ward.y)47   5.153e+04  6.149e+04   0.838 0.402019    
factor(geographic_ward.y)48  -6.535e+04  3.007e+04  -2.173 0.029784 *  
factor(geographic_ward.y)49  -9.946e+04  3.364e+04  -2.957 0.003113 ** 
factor(geographic_ward.y)5    1.311e+05  2.446e+04   5.358 8.51e-08 ***
factor(geographic_ward.y)50  -5.237e+04  3.419e+04  -1.532 0.125627    
factor(geographic_ward.y)51  -5.723e+04  3.107e+04  -1.842 0.065482 .  
factor(geographic_ward.y)52  -1.220e+05  3.321e+04  -3.673 0.000241 ***
factor(geographic_ward.y)53  -9.117e+04  3.079e+04  -2.961 0.003073 ** 
factor(geographic_ward.y)54  -5.779e+04  3.130e+04  -1.847 0.064821 .  
factor(geographic_ward.y)55  -5.140e+04  2.899e+04  -1.773 0.076239 .  
factor(geographic_ward.y)56  -4.129e+04  2.883e+04  -1.433 0.152010    
factor(geographic_ward.y)57  -4.913e+04  2.916e+04  -1.685 0.092001 .  
factor(geographic_ward.y)58  -8.691e+03  2.974e+04  -0.292 0.770134    
factor(geographic_ward.y)59  -1.688e+04  3.467e+04  -0.487 0.626295    
factor(geographic_ward.y)6   -1.429e+05  4.237e+04  -3.372 0.000748 ***
factor(geographic_ward.y)60   4.077e+04  3.497e+04   1.166 0.243589    
factor(geographic_ward.y)61  -1.200e+05  3.114e+04  -3.853 0.000117 ***
factor(geographic_ward.y)62  -7.175e+04  2.951e+04  -2.432 0.015042 *  
factor(geographic_ward.y)63  -2.766e+04  3.000e+04  -0.922 0.356543    
factor(geographic_ward.y)64  -4.970e+04  3.248e+04  -1.530 0.126006    
factor(geographic_ward.y)65  -5.590e+04  2.913e+04  -1.919 0.055026 .  
factor(geographic_ward.y)66  -2.391e+04  2.590e+04  -0.923 0.355869    
factor(geographic_ward.y)7   -1.021e+05  3.148e+04  -3.245 0.001176 ** 
factor(geographic_ward.y)8    4.994e+05  2.701e+04  18.488  &lt; 2e-16 ***
factor(geographic_ward.y)9    2.249e+05  3.239e+04   6.942 3.97e-12 ***
total_livable_area:house_age -2.042e+00  9.944e-02 -20.536  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 394500 on 25119 degrees of freedom
  (916 observations deleted due to missingness)
Multiple R-squared:  0.2744,    Adjusted R-squared:  0.2723 
F-statistic: 128.4 on 74 and 25119 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p><strong>For presentation slides:</strong> Show <strong>one comparison table</strong> (RMSE, R² for 4 different models you constructed in your process)</p>
<p><strong>For appendix:</strong></p>
<ul>
<li>Complete model code</li>
<li>Full stargazer/modelsummary output</li>
<li>Coefficient interpretations</li>
</ul>
<p><strong>Example presentation slide:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Model Performance Improves with Each Layer</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Model <span class="pp">|</span> CV RMSE (log) <span class="pp">|</span> R² <span class="pp">|</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|-------|---------------|-----|</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Structural Only <span class="pp">|</span> 0.42 <span class="pp">|</span> 0.61 <span class="pp">|</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> + Census <span class="pp">|</span> 0.38 <span class="pp">|</span> 0.69 <span class="pp">|</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> + Spatial <span class="pp">|</span> 0.31 <span class="pp">|</span> 0.78 <span class="pp">|</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> + Interactions/FE <span class="pp">|</span> 0.26 <span class="pp">|</span> 0.84 <span class="pp">|</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>**Bottom line:** Neighborhood effects matter most!</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="phase-5-model-validation" class="level3">
<h3 class="anchored" data-anchor-id="phase-5-model-validation">Phase 5: Model Validation</h3>
<p><strong>Use 10-fold cross-validation:</strong> - Compare all 4 models - Report RMSE, MAE, R² for each - Create predicted vs.&nbsp;actual plot</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> opa_census <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    sale_price, total_livable_area, number_of_bedrooms,</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    number_of_bathrooms, house_age,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    median_income, ba_rate, unemployment_rate,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    crime_count, transit_count, recreation_count,</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>    nearest_hospital_m, geographic_ward.y</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">complete.cases</span>(.))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>cv_control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"cv"</span>,</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">savePredictions =</span> <span class="st">"final"</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>fml1 <span class="ot">&lt;-</span> sale_price <span class="sc">~</span> total_livable_area <span class="sc">+</span> number_of_bedrooms <span class="sc">+</span> number_of_bathrooms <span class="sc">+</span> house_age</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>fml2 <span class="ot">&lt;-</span> <span class="fu">update</span>(fml1, . <span class="sc">~</span> . <span class="sc">+</span> median_income <span class="sc">+</span> ba_rate <span class="sc">+</span> unemployment_rate)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>fml3 <span class="ot">&lt;-</span> <span class="fu">update</span>(fml2, . <span class="sc">~</span> . <span class="sc">+</span> crime_count <span class="sc">+</span> transit_count <span class="sc">+</span> recreation_count <span class="sc">+</span> nearest_hospital_m)</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>fml4 <span class="ot">&lt;-</span> <span class="fu">update</span>(fml3, . <span class="sc">~</span> . <span class="sc">+</span> total_livable_area<span class="sc">:</span>house_age <span class="sc">+</span> <span class="fu">factor</span>(geographic_ward.y))</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">train</span>(fml1, <span class="at">data =</span> model_data, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">trControl =</span> cv_control)</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">train</span>(fml2, <span class="at">data =</span> model_data, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">trControl =</span> cv_control)</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">train</span>(fml3, <span class="at">data =</span> model_data, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">trControl =</span> cv_control)</span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>m4 <span class="ot">&lt;-</span> <span class="fu">train</span>(fml4, <span class="at">data =</span> model_data, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">trControl =</span> cv_control)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">resamples</span>(<span class="fu">list</span>(</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model1 =</span> m1, <span class="at">Model2 =</span> m2, <span class="at">Model3 =</span> m3, <span class="at">Model4 =</span> m4</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
summary.resamples(object = results)

Models: Model1, Model2, Model3, Model4 
Number of resamples: 10 

MAE 
           Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
Model1 152235.1 157737.0 162730.0 162369.5 167572.4 169991.7    0
Model2 126660.3 136852.3 141913.9 142058.1 146846.3 162193.6    0
Model3 139271.6 142654.1 146708.2 147768.2 150881.0 160161.4    0
Model4 135988.0 143534.9 145708.1 146378.5 147016.3 156004.2    0

RMSE 
           Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
Model1 366393.5 400504.9 419489.5 415452.1 428061.4 470111.9    0
Model2 310999.8 356390.6 418042.2 406309.6 429887.7 512243.7    0
Model3 338229.7 378669.6 387665.0 404616.0 425914.7 499001.2    0
Model4 354668.1 378112.8 388187.7 394980.0 397163.2 446983.3    0

Rsquared 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
Model1 0.1199934 0.1606408 0.2023288 0.1932075 0.2188695 0.2660367    0
Model2 0.1083257 0.2073197 0.2294594 0.2225998 0.2606119 0.3000572    0
Model3 0.1616538 0.1930158 0.2213475 0.2319998 0.2636017 0.3328444    0
Model4 0.1981433 0.2348501 0.2647516 0.2688002 0.3027461 0.3527661    0</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>predicted_df <span class="ot">&lt;-</span> m4<span class="sc">$</span>pred</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(predicted_df, <span class="fu">aes</span>(<span class="at">x =</span> pred, <span class="at">y =</span> obs)) <span class="sc">+</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"#4682B4"</span>) <span class="sc">+</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Predicted vs. Actual Sale Prices (Model 4)"</span>,</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Predicted Price"</span>, <span class="at">y =</span> <span class="st">"Actual Price"</span>) <span class="sc">+</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>For presentation slides:</strong> Final CV results table (shown above) + one compelling visual</p>
<p><strong>For appendix:</strong></p>
<ul>
<li>Complete CV code</li>
<li>Detailed results</li>
<li>Predicted vs.&nbsp;actual scatter plot</li>
<li>Discussion of which features matter most</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'gt' was built under R version 4.4.3</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>model_results <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Model 1"</span>, <span class="st">"Model 2"</span>, <span class="st">"Model 3"</span>, <span class="st">"Model 4"</span>),</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">MAE =</span> <span class="fu">c</span>(<span class="dv">139645</span>, <span class="dv">125333</span>, <span class="dv">130631</span>, <span class="dv">126322</span>),</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">RMSE =</span> <span class="fu">c</span>(<span class="dv">348642</span>, <span class="dv">344890</span>, <span class="dv">341023</span>, <span class="dv">326913</span>),</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">R2 =</span> <span class="fu">c</span>(<span class="fl">0.304</span>, <span class="fl">0.325</span>, <span class="fl">0.341</span>, <span class="fl">0.394</span>)</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>model_results <span class="sc">%&gt;%</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(MAE, RMSE), <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> R2, <span class="at">decimals =</span> <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="pdkpbjvqmg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pdkpbjvqmg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pdkpbjvqmg thead, #pdkpbjvqmg tbody, #pdkpbjvqmg tfoot, #pdkpbjvqmg tr, #pdkpbjvqmg td, #pdkpbjvqmg th {
  border-style: none;
}

#pdkpbjvqmg p {
  margin: 0;
  padding: 0;
}

#pdkpbjvqmg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pdkpbjvqmg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pdkpbjvqmg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pdkpbjvqmg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pdkpbjvqmg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pdkpbjvqmg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pdkpbjvqmg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pdkpbjvqmg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pdkpbjvqmg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pdkpbjvqmg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pdkpbjvqmg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pdkpbjvqmg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pdkpbjvqmg .gt_spanner_row {
  border-bottom-style: hidden;
}

#pdkpbjvqmg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pdkpbjvqmg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pdkpbjvqmg .gt_from_md > :first-child {
  margin-top: 0;
}

#pdkpbjvqmg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pdkpbjvqmg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pdkpbjvqmg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pdkpbjvqmg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pdkpbjvqmg .gt_row_group_first td {
  border-top-width: 2px;
}

#pdkpbjvqmg .gt_row_group_first th {
  border-top-width: 2px;
}

#pdkpbjvqmg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pdkpbjvqmg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pdkpbjvqmg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pdkpbjvqmg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pdkpbjvqmg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pdkpbjvqmg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pdkpbjvqmg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pdkpbjvqmg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pdkpbjvqmg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pdkpbjvqmg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pdkpbjvqmg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pdkpbjvqmg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pdkpbjvqmg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pdkpbjvqmg .gt_left {
  text-align: left;
}

#pdkpbjvqmg .gt_center {
  text-align: center;
}

#pdkpbjvqmg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pdkpbjvqmg .gt_font_normal {
  font-weight: normal;
}

#pdkpbjvqmg .gt_font_bold {
  font-weight: bold;
}

#pdkpbjvqmg .gt_font_italic {
  font-style: italic;
}

#pdkpbjvqmg .gt_super {
  font-size: 65%;
}

#pdkpbjvqmg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pdkpbjvqmg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pdkpbjvqmg .gt_indent_1 {
  text-indent: 5px;
}

#pdkpbjvqmg .gt_indent_2 {
  text-indent: 10px;
}

#pdkpbjvqmg .gt_indent_3 {
  text-indent: 15px;
}

#pdkpbjvqmg .gt_indent_4 {
  text-indent: 20px;
}

#pdkpbjvqmg .gt_indent_5 {
  text-indent: 25px;
}

#pdkpbjvqmg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#pdkpbjvqmg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Model" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Model</th>
<th id="MAE" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">MAE</th>
<th id="RMSE" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">RMSE</th>
<th id="R2" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">R2</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Model">Model 1</td>
<td class="gt_row gt_right" headers="MAE">139,645</td>
<td class="gt_row gt_right" headers="RMSE">348,642</td>
<td class="gt_row gt_right" headers="R2">0.304</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Model">Model 2</td>
<td class="gt_row gt_right" headers="MAE">125,333</td>
<td class="gt_row gt_right" headers="RMSE">344,890</td>
<td class="gt_row gt_right" headers="R2">0.325</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Model">Model 3</td>
<td class="gt_row gt_right" headers="MAE">130,631</td>
<td class="gt_row gt_right" headers="RMSE">341,023</td>
<td class="gt_row gt_right" headers="R2">0.341</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Model">Model 4</td>
<td class="gt_row gt_right" headers="MAE">126,322</td>
<td class="gt_row gt_right" headers="RMSE">326,913</td>
<td class="gt_row gt_right" headers="R2">0.394</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<hr>
</section>
<section id="phase-6-model-diagnostics-technical-appendix-only" class="level3">
<h3 class="anchored" data-anchor-id="phase-6-model-diagnostics-technical-appendix-only">Phase 6: Model Diagnostics (Technical Appendix Only)</h3>
<p><strong>Check assumptions for best model:</strong></p>
<ul>
<li>Residual plot (linearity, homoscedasticity)</li>
<li>Q-Q plot (normality)</li>
<li>Cook’s distance (influential observations)</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Residuals vs Fitted</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model4, <span class="at">which =</span> <span class="dv">1</span>, <span class="at">main =</span> <span class="st">"Residuals vs Fitted"</span>)</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Normal Q-Q</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model4, <span class="at">which =</span> <span class="dv">2</span>, <span class="at">main =</span> <span class="st">"Q-Q Plot"</span>)</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Cook’s distance</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model4, <span class="at">which =</span> <span class="dv">4</span>, <span class="at">main =</span> <span class="st">"Cook’s Distance"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>opa_census<span class="sc">$</span>predicted <span class="ot">&lt;-</span> <span class="fu">predict</span>(model4, <span class="at">newdata =</span> opa_census)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>opa_census<span class="sc">$</span>residual <span class="ot">&lt;-</span> opa_census<span class="sc">$</span>sale_price <span class="sc">-</span> opa_census<span class="sc">$</span>predicted</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>opa_census <span class="sc">%&gt;%</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(residual)) <span class="sc">%&gt;%</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> residual), <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Prediction Residuals (Model 4)"</span>,</span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Residual ($)"</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 25194 rows containing missing values or values outside the scale range
(`geom_sf()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_2025_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Deliverable (Appendix only):</strong></p>
<ul>
<li>All 3 diagnostic plots</li>
<li>Interpretation of each</li>
<li>How you addressed violations (if any)</li>
</ul>
<p><strong>Note:</strong> Don’t include diagnostic plots in presentation - too technical!</p>
<hr>
</section>
<section id="phase-7-conclusions-recommendations" class="level3">
<h3 class="anchored" data-anchor-id="phase-7-conclusions-recommendations">Phase 7: Conclusions &amp; Recommendations</h3>
<p><strong>Answer these questions:</strong></p>
<ol type="1">
<li>What is your final model’s accuracy?</li>
<li>Which features matter most for Philadelphia prices?</li>
<li>Which neighborhoods are hardest to predict?</li>
<li>Equity concerns?</li>
<li>Limitations?</li>
</ol>
<p><strong>For presentation slides:</strong> 1-2 slides with clear, concise answers (bullet points)</p>
<p><strong>For appendix:</strong> 2-3 paragraphs with detailed discussion</p>
<p><strong>Example presentation slide:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb82"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key Findings &amp; Recommendations</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>**Model Accuracy:** RMSE = 0.26 (log scale) ≈ 26% typical error</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>**Top Predictors:**</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Neighborhood fixed effects (largest impact)</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Square footage (β = 0.0003, p &lt; 0.001)</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Distance to transit (β = -0.05, p &lt; 0.001)</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>**Recommendations:**</span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>✓ Current AVM undervalues transit-accessible properties  </span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>✓ Model struggles in rapidly gentrifying neighborhoods  </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="submission-requirements" class="level2">
<h2 class="anchored" data-anchor-id="submission-requirements">Submission Requirements</h2>
<section id="what-to-submit-by-959-am-october-27-2025" class="level3">
<h3 class="anchored" data-anchor-id="what-to-submit-by-959-am-october-27-2025">What to Submit (by 9:59 AM, October 27, 2025)</h3>
<p><strong>Upload to Canvas - A link to your portfolio that Contains</strong></p>
<ol type="1">
<li><p><strong>Presentation Slides</strong></p>
<ul>
<li><code>LastName_FirstName_Presentation.html</code> (rendered slides)</li>
<li><code>LastName_FirstName_Presentation.qmd</code> (source file)</li>
<li>Must use <code>format: revealjs</code></li>
<li>10-15 slides maximum</li>
<li>No code visible in slides</li>
</ul></li>
<li><p><strong>Technical Appendix</strong></p>
<ul>
<li><code>LastName_FirstName_Appendix.html</code> (rendered document)</li>
<li><code>LastName_FirstName_Appendix.qmd</code> (source file)</li>
<li>Must use <code>format: html</code></li>
<li>All code visible and commented</li>
<li>Complete analysis documented</li>
</ul></li>
<li><p><strong>Data files</strong> OR clear download instructions in appendix</p></li>
</ol>
<p><strong>For Teams:</strong> Use <code>LastName1_LastName2_Presentation.html</code></p>
</section>
<section id="in-class-presentation-october-27-2025" class="level3">
<h3 class="anchored" data-anchor-id="in-class-presentation-october-27-2025">In-Class Presentation (October 27, 2025)</h3>
<p><strong>Format:</strong> 5 minutes per team</p>
<p><strong>What to present:</strong></p>
<ul>
<li>Walk through your presentation slides. Choose your team’s spoke’s person or take turns You’ll all stand up there and try to look calm, confident, &amp; collected.</li>
<li>Hit the highlights - research question, key viz, model results, recommendations</li>
<li>Speak to a policy audience (your classmates are pretending to be city officials)</li>
<li>Be ready for 1-2 questions</li>
<li>You are trying to win the bid! Convince the audience of your agency’s work.</li>
</ul>
<p><strong>What NOT to do:</strong></p>
<ul>
<li>Don’t read slides verbatim</li>
<li>Don’t show code</li>
<li>Don’t go into technical details</li>
<li>Don’t go over 5 minutes (I’ll cut you off!)</li>
</ul>
<hr>
</section>
</section>
<section id="grading-rubric-scaled-to-15-of-course-grade" class="level2">
<h2 class="anchored" data-anchor-id="grading-rubric-scaled-to-15-of-course-grade">Grading Rubric (Scaled to 15% of course grade)</h2>
<section id="presentation-slides" class="level3">
<h3 class="anchored" data-anchor-id="presentation-slides">Presentation Slides</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 27%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Points</th>
<th>Criteria</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Research Question</strong></td>
<td>2</td>
<td>Clear motivation, Set the stage</td>
</tr>
<tr class="even">
<td><strong>Data Overview</strong></td>
<td>2</td>
<td>Concise description of sources, sample size</td>
</tr>
<tr class="odd">
<td><strong>Visualizations</strong></td>
<td>3</td>
<td>2-3 polished, publication-quality visualizations; clear takeaways</td>
</tr>
<tr class="even">
<td><strong>Model Comparison</strong></td>
<td>3</td>
<td>Clean results table; clear winner; interprets improvement</td>
</tr>
<tr class="odd">
<td><strong>Key Findings</strong></td>
<td>3</td>
<td>Top predictors identified; coefficients interpreted correctly</td>
</tr>
<tr class="even">
<td><strong>Presentation Quality</strong></td>
<td>3</td>
<td>Professional design, no typos, flows logically, appropriate for audience</td>
</tr>
</tbody>
</table>
<p><strong>Key:</strong> Slides should tell a compelling story without technical jargon. Imagine presenting to the Deputy Mayor.</p>
<hr>
</section>
<section id="in-class-presentation" class="level3">
<h3 class="anchored" data-anchor-id="in-class-presentation">In-Class Presentation</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 27%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Points</th>
<th>Criteria</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Content</strong></td>
<td>2</td>
<td>Covers key points efficiently, answers questions thoughtfully</td>
</tr>
<tr class="even">
<td><strong>Time Management</strong></td>
<td>2</td>
<td>Finishes within 5 minutes without rushing</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="technical-appendix" class="level3">
<h3 class="anchored" data-anchor-id="technical-appendix">Technical Appendix</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 27%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Points</th>
<th>Criteria</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Data Cleaning</strong></td>
<td>3</td>
<td>Complete code, proper filtering, missing value handling, documentation</td>
</tr>
<tr class="even">
<td><strong>EDA</strong></td>
<td>3</td>
<td>5+ visualizations, each with interpretation</td>
</tr>
<tr class="odd">
<td><strong>Feature Engineering</strong></td>
<td>3</td>
<td>Buffers , kNN , census , interactions , all properly created</td>
</tr>
<tr class="even">
<td><strong>Model Building</strong></td>
<td>3</td>
<td>4 progressive models, proper specification, handles sparse categories</td>
</tr>
<tr class="odd">
<td><strong>Cross-Validation</strong></td>
<td>3</td>
<td>Proper 10-fold CV, results table, code runs without errors</td>
</tr>
<tr class="even">
<td><strong>Diagnostics</strong></td>
<td>3</td>
<td>Residual plots included, interpreted, violations addressed</td>
</tr>
<tr class="odd">
<td><strong>Code Quality</strong></td>
<td>3</td>
<td>Clean, commented, reproducible, follows best practices, no errors</td>
</tr>
</tbody>
</table>
<p><strong>Key:</strong> This is where technical reviewers verify your work. All code must run without errors &amp; be reproducible!!.</p>
<hr>
</section>
</section>
<section id="example-presentation-structure" class="level2">
<h2 class="anchored" data-anchor-id="example-presentation-structure">Example Presentation Structure</h2>
<p><strong>Slide 1: Title</strong> - Your team name and teammates - Project title - Date</p>
<p><strong>Slide 2: The Problem</strong></p>
<p><strong>Slide 3: Data Sources</strong> - Property sales (n = X,XXX, 2023-2024) - Census ACS (income, education, poverty) - OpenDataPhilly (parks, transit, crime)</p>
<p><strong>Slide 4: Where Are Expensive Homes?</strong> - [Map visualization] - Key pattern observed</p>
<p><strong>Slide 5: What Drives Prices?</strong> - [Best scatter plot or faceted visualization] - Key relationship identified</p>
<p><strong>Slide 6: Model Comparison</strong> - [Results table] - “Each layer improves prediction”</p>
<p><strong>Slide 7: Top Predictors</strong> - Neighborhood (biggest impact) - Square footage (β = X) - Transit access (β = Y)</p>
<p><strong>Slide 8: Model Performance</strong> - Final RMSE: 0.26 (log scale) - Translation: ~26% typical error - Beats baseline by 40%</p>
<p><strong>Slide 9: Hardest to Predict</strong> - [Visualization of residuals by neighborhood]</p>
<p><strong>Slide 10: Recommendations</strong></p>
<p><strong>Slide 11: Limitations &amp; Next Steps</strong></p>
<p><strong>Slide 12: Questions?</strong> - Thank you - [Contact info]</p>
<hr>
</section>
<section id="tips-for-success" class="level2">
<h2 class="anchored" data-anchor-id="tips-for-success">Tips for Success</h2>
<section id="start-early" class="level3">
<h3 class="anchored" data-anchor-id="start-early">Start Early</h3>
<ul>
<li>Data cleaning always takes longer than expected</li>
<li>OpenDataPhilly can be slow to download</li>
<li>Leave time for troubleshooting AND RENDERING!!!</li>
</ul>
</section>
<section id="check-your-work" class="level3">
<h3 class="anchored" data-anchor-id="check-your-work">Check Your Work</h3>
<ul>
<li>Organize your file directory from the beginning.</li>
<li>Run your entire .qmd file from scratch before submitting</li>
<li>Make sure all visualizations display</li>
<li>Check that your narrative flows logically</li>
</ul>
<hr>
</section>
</section>
<section id="frequently-asked-questions" class="level2">
<h2 class="anchored" data-anchor-id="frequently-asked-questions">Frequently Asked Questions</h2>
<p><strong>Q: Do I have to create both slides AND an appendix?</strong></p>
<p>A: Yes! Slides are your main deliverable (present findings). Appendix proves you did the work correctly.</p>
<p><strong>Q: Can code appear in my presentation slides?</strong></p>
<p>A: NO! Slides are for city officials. All code goes in the technical appendix.</p>
<p><strong>Q: How many slides should I have?</strong></p>
<p>A: 10-15 maximum. Quality over quantity. Each slide should have a clear purpose.</p>
<p><strong>Q: Can I use a different city?</strong><br>
A: No, everyone uses Philadelphia for comparability.</p>
<p><strong>Q: How do I make my .qmd render as revealjs slides?</strong><br>
A: Use <code>format: revealjs</code> in your YAML (see template above). Test it early!</p>
<p><strong>Q: My presentation is 8 minutes. Is that okay?</strong><br>
A: NO! You must cut it to 5 minutes. Practice and trim ruthlessly.</p>
<p><strong>Q: Should I include all 5 EDA visualizations in my slides?</strong><br>
A: No! Slides should have your best 2-3 visualizations. Put all 5 in the appendix.</p>
<p><strong>Q: My RMSE is 0.35 in log scale. Is that good?</strong><br>
A: Depends on your data, but 0.25-0.45 is typical for hedonic models. Compare to your baseline or put your data back into dollars!</p>
<p><strong>Q: Should I remove all outliers?</strong><br>
A: No! Only remove obvious errors. Use log transformation to handle legitimate outliers.</p>
<p><strong>Q: What if my code works on my computer but not when I knit?</strong><br>
A: Start fresh, restart R, knit in a clean session. Check for hard-coded paths.</p>
<p><strong>Q: Can I use ChatGPT/Claude to write my analysis?</strong><br>
A: You may use AI for debugging code, but NOT for writing your analysis.</p>
<p><strong>Q: How formal should my presentation be?</strong><br>
A: Professional but not stuffy. Like you’re briefing a city council member who’s smart but doesn’t know statistics.</p>
<p><strong>Q: What happens if I go over 5 minutes?</strong><br>
A: I’ll politely cut you off and you’ll lose points. Practice with a timer!</p>
<hr>
</section>
<section id="example-workflow" class="level2">
<h2 class="anchored" data-anchor-id="example-workflow">Example Workflow</h2>
<p><strong>Week 1:</strong> - Download data - Initial cleaning - Basic EDA</p>
<p><strong>Week 2:</strong> - Feature engineering - Build 4 models - Run cross-validation - Diagnostics - Write conclusions - Proofread and submit</p>
<hr>
</section>
<section id="academic-integrity" class="level2">
<h2 class="anchored" data-anchor-id="academic-integrity">Academic Integrity</h2>
<ul>
<li>You may discuss concepts with classmates</li>
<li>You may NOT share code or slides</li>
<li>All work must be your own (or your teams)</li>
<li>Cite any external resources used</li>
<li>Please acknowledge how you used AI in your work and which AI you used (For example, Claude helped me today in coming up with a draft of this assignment, but I edited it thoroughly!)</li>
</ul>
<hr>
</section>
<section id="final-checklist-before-submitting" class="level2">
<h2 class="anchored" data-anchor-id="final-checklist-before-submitting">Final Checklist Before Submitting</h2>
<section id="presentation-slides-1" class="level3">
<h3 class="anchored" data-anchor-id="presentation-slides-1">Presentation Slides</h3>
<ul class="task-list">
<li><label><input type="checkbox">Renders correctly as revealjs slides</label></li>
<li><label><input type="checkbox">10-15 slides maximum</label></li>
<li><label><input type="checkbox">No code visible anywhere</label></li>
<li><label><input type="checkbox">2-3 polished visualizations</label></li>
<li><label><input type="checkbox">Clear model comparison table</label></li>
<li><label><input type="checkbox">No typos or formatting errors</label></li>
<li><label><input type="checkbox">Professional theme applied</label></li>
<li><label><input type="checkbox">Tested presentation timing (&lt;5 minutes)</label></li>
</ul>
</section>
<section id="technical-appendix-1" class="level3">
<h3 class="anchored" data-anchor-id="technical-appendix-1">Technical Appendix</h3>
<ul class="task-list">
<li><label><input type="checkbox">Renders correctly as HTML document</label></li>
<li><label><input type="checkbox">All code visible and commented</label></li>
<li><label><input type="checkbox">Data cleaning fully documented</label></li>
<li><label><input type="checkbox">5+ EDA visualizations included</label></li>
<li><label><input type="checkbox">All features properly created</label></li>
<li><label><input type="checkbox">4 models with full output</label></li>
<li><label><input type="checkbox">10-fold CV code runs without errors</label></li>
<li><label><input type="checkbox">Diagnostic plots included</label></li>
<li><label><input type="checkbox">Sparse categories handled correctly</label></li>
<li><label><input type="checkbox">Tested that it knits without errors</label></li>
</ul>
</section>
<section id="both-files" class="level3">
<h3 class="anchored" data-anchor-id="both-files">Both Files</h3>
<ul class="task-list">
<li><label><input type="checkbox">Proper file naming convention</label></li>
<li><label><input type="checkbox">Both .qmd source files included</label></li>
<li><label><input type="checkbox">Data sources clearly documented</label></li>
<li><label><input type="checkbox">No hard-coded file paths (use relative paths! - this should be reproducible)</label></li>
<li><label><input type="checkbox">Uploaded to Canvas on time</label></li>
</ul>
<hr>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>